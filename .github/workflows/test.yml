name: Test
on:
    push:
        branches:
            - master
            - develop
    pull_request:
        types:
            - ready_for_review
            - synchronize
            - opened
jobs:
    application:
        runs-on: ubuntu-latest
        env:
            COVERAGE_INCLUDE_PATH: src/app
        strategy:
            matrix:
                node-version:
                    - 22
        concurrency:
            group: ${{ github.head_ref }}-test-app
            cancel-in-progress: true
        steps:
            - uses: actions/checkout@v4
              with:
                  ref: ${{ github.head_ref }}
            - uses: pnpm/action-setup@v4
              with:
                  version: 10
            - uses: actions/setup-node@v4
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: pnpm
            - name: Update System
              run: sudo apt-get update
            - name: Install (pnpm)
              run: pnpm install --frozen-lockfile
            - name: Rebuild
              run: pnpm rebuild

            - name: Test App (validations)
              env:
                  COVERAGE_THRESHOLD_LINES: 100
                  COVERAGE_THRESHOLD_FUNCTIONS: 100
                  COVERAGE_THRESHOLD_STATEMENTS: 100
                  COVERAGE_THRESHOLD_BRANCHES:
                  COVERAGE_INCLUDE_PATH: src/app/validations/*test*
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 1
                  command: pnpm test:coverage src/app/validations/*test*

            - name: Test Context Providers (Ledger)
              env:
                  COVERAGE_THRESHOLD_LINES: 100
                  COVERAGE_THRESHOLD_FUNCTIONS: 100
                  COVERAGE_THRESHOLD_STATEMENTS: 100
                  COVERAGE_THRESHOLD_BRANCHES: 100
                  COVERAGE_INCLUDE_PATH: src/app/contexts/Ledger/*test*
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 1
                  command: pnpm test:coverage src/app/contexts/Ledger/*test*

            - name: Test Context Providers (Configuration)
              env:
                  COVERAGE_THRESHOLD_LINES: 100
                  COVERAGE_THRESHOLD_FUNCTIONS: 100
                  COVERAGE_THRESHOLD_STATEMENTS: 100
                  COVERAGE_THRESHOLD_BRANCHES: 100
                  COVERAGE_INCLUDE_PATH: src/app/contexts/Configuration/*test*
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 1
                  command: pnpm test:coverage src/app/contexts/Configuration/*test*

            - name: Test Context Providers (Environment)
              env:
                  COVERAGE_THRESHOLD_LINES: 100
                  COVERAGE_THRESHOLD_FUNCTIONS: 100
                  COVERAGE_THRESHOLD_STATEMENTS: 100
                  COVERAGE_THRESHOLD_BRANCHES: 100
                  COVERAGE_INCLUDE_PATH: src/app/contexts/Environment/*test*
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 1
                  command: pnpm test:coverage src/app/contexts/Environment/*test*

            - name: Test Context Providers (Navigation)
              env:
                  COVERAGE_THRESHOLD_LINES: 100
                  COVERAGE_THRESHOLD_FUNCTIONS: 100
                  COVERAGE_THRESHOLD_STATEMENTS: 100
                  COVERAGE_THRESHOLD_BRANCHES: 100
                  COVERAGE_INCLUDE_PATH: src/app/contexts/Navigation/*test*
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 2
                  command: pnpm test:coverage src/app/contexts/Navigation/*test*

            - name: Test App
              env:
                  COVERAGE_THRESHOLD_LINES: 100
                  COVERAGE_THRESHOLD_FUNCTIONS: 100
                  COVERAGE_THRESHOLD_STATEMENTS: 100
                  COVERAGE_THRESHOLD_BRANCHES:
                  COVERAGE_INCLUDE_PATH: src/app/App*test*
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 1
                  command: pnpm test:coverage src/app/App*test*

    application-hooks:
        runs-on: ubuntu-latest
        env:
            COVERAGE_INCLUDE_PATH: src/app
        strategy:
            matrix:
                node-version:
                    - 22
        concurrency:
            group: ${{ github.head_ref }}-test-app-hooks
            cancel-in-progress: true
        steps:
            - uses: actions/checkout@v4
              with:
                  ref: ${{ github.head_ref }}
            - uses: pnpm/action-setup@v4
              with:
                  version: 10
            - uses: actions/setup-node@v4
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: pnpm
            - name: Update System
              run: sudo apt-get update
            - name: Install (pnpm)
              run: pnpm install --frozen-lockfile
            - name: Rebuild
              run: pnpm rebuild

            - name: Test hooks ^a-f
              env:
                  COVERAGE_THRESHOLD_LINES: 100
                  COVERAGE_THRESHOLD_FUNCTIONS: 100
                  COVERAGE_THRESHOLD_STATEMENTS: 100
                  COVERAGE_THRESHOLD_BRANCHES: 100
                  COVERAGE_INCLUDE_PATH: src/app/hooks/use-[a-f]*test*
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 2
                  command: pnpm test:coverage src/app/hooks/use-[a-f]*test*

            - name: Test hooks ^h-o
              env:
                  COVERAGE_THRESHOLD_LINES: 100
                  COVERAGE_THRESHOLD_FUNCTIONS: 100
                  COVERAGE_THRESHOLD_STATEMENTS: 100
                  COVERAGE_THRESHOLD_BRANCHES: 100
                  COVERAGE_INCLUDE_PATH: src/app/hooks/use-[h-o]*test*
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 2
                  command: pnpm test:coverage src/app/hooks/use-[h-o]*test*

            - name: Test hooks ^p-s
              env:
                  COVERAGE_THRESHOLD_LINES: 100
                  COVERAGE_THRESHOLD_FUNCTIONS: 100
                  COVERAGE_THRESHOLD_STATEMENTS: 100
                  COVERAGE_THRESHOLD_BRANCHES: 100
                  COVERAGE_INCLUDE_PATH: src/app/hooks/use-[p-s]*test*
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 2
                  command: pnpm test:coverage src/app/hooks/use-[p-s]*test*

            - name: Test hooks ^t-z
              env:
                  COVERAGE_THRESHOLD_LINES: 100
                  COVERAGE_THRESHOLD_FUNCTIONS: 100
                  COVERAGE_THRESHOLD_STATEMENTS: 100
                  COVERAGE_THRESHOLD_BRANCHES: 100
                  COVERAGE_INCLUDE_PATH: src/app/hooks/use-[t-z]*test*
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 2
                  command: pnpm test:coverage src/app/hooks/use-[t-z]*test*

    application-components:
        runs-on: ubuntu-latest
        env:
            COVERAGE_INCLUDE_PATH: src/app/components
        strategy:
            matrix:
                node-version:
                    - 22
        concurrency:
            group: ${{ github.head_ref }}-test-app-components
            cancel-in-progress: true
        steps:
            - uses: actions/checkout@v4
              with:
                  ref: ${{ github.head_ref }}
            - uses: pnpm/action-setup@v4
              with:
                  version: 10
            - uses: actions/setup-node@v4
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: pnpm
            - name: Update System
              run: sudo apt-get update
            - name: Install (pnpm)
              run: pnpm install --frozen-lockfile
            - name: Rebuild
              run: pnpm rebuild

            - name: Test Components ^A-B
              env:
                  COVERAGE_THRESHOLD_LINES: 100
                  COVERAGE_THRESHOLD_FUNCTIONS: 100
                  COVERAGE_THRESHOLD_STATEMENTS: 100
                  COVERAGE_THRESHOLD_BRANCHES: 100
                  COVERAGE_INCLUDE_PATH: src/app/components/[A-B]**/**test*
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 2
                  command: pnpm test:coverage src/app/components/[A-B]**/**test**

            - name: Test Components ^C-D
              env:
                  COVERAGE_THRESHOLD_LINES: 100
                  COVERAGE_THRESHOLD_FUNCTIONS: 100
                  COVERAGE_THRESHOLD_STATEMENTS: 100
                  COVERAGE_THRESHOLD_BRANCHES: 100
                  COVERAGE_INCLUDE_PATH: src/app/components/[C-D]**/**test*
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 2
                  command: pnpm test:coverage src/app/components/[C-D]**/**test*

            - name: Test Components ^E-F
              env:
                  COVERAGE_THRESHOLD_LINES: 100
                  COVERAGE_THRESHOLD_FUNCTIONS: 100
                  COVERAGE_THRESHOLD_STATEMENTS: 100
                  COVERAGE_THRESHOLD_BRANCHES: 100
                  COVERAGE_INCLUDE_PATH: src/app/components/[E-F]**/**test*
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 2
                  command: pnpm test:coverage src/app/components/[E-F]**/**test*

            - name: Test Components ^G-L
              env:
                  COVERAGE_THRESHOLD_LINES: 100
                  COVERAGE_THRESHOLD_FUNCTIONS: 100
                  COVERAGE_THRESHOLD_STATEMENTS: 100
                  COVERAGE_THRESHOLD_BRANCHES: 100
                  COVERAGE_INCLUDE_PATH: src/app/components/[G-L]**/**test*
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 2
                  command: pnpm test:coverage src/app/components/[G-L]**/**test*

            - name: Test Components ^M-O
              env:
                  COVERAGE_THRESHOLD_LINES: 100
                  COVERAGE_THRESHOLD_FUNCTIONS: 100
                  COVERAGE_THRESHOLD_STATEMENTS: 100
                  COVERAGE_THRESHOLD_BRANCHES: 100
                  COVERAGE_INCLUDE_PATH: src/app/components/[M-O]**/**test*
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 2
                  command: pnpm test:coverage src/app/components/[M-O]**/**test*

            - name: Test Components ^P-R
              env:
                  COVERAGE_THRESHOLD_LINES: 100
                  COVERAGE_THRESHOLD_FUNCTIONS: 100
                  COVERAGE_THRESHOLD_STATEMENTS: 100
                  COVERAGE_THRESHOLD_BRANCHES: 100
                  COVERAGE_INCLUDE_PATH: src/app/components/[P-R]**/**test*
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 2
                  command: pnpm test:coverage src/app/components/[P-R]**/**test*

            - name: Test Components ^S-Z
              env:
                  COVERAGE_THRESHOLD_LINES: 100
                  COVERAGE_THRESHOLD_FUNCTIONS: 100
                  COVERAGE_THRESHOLD_STATEMENTS: 100
                  COVERAGE_THRESHOLD_BRANCHES: 100
                  COVERAGE_INCLUDE_PATH: src/app/components/[S-Z]**/**test*
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 2
                  command: pnpm test:coverage src/app/components/[S-Z]**/**test*

    domains-contact:
        runs-on: ubuntu-latest
        env:
            COVERAGE_INCLUDE_PATH: src/domains/contact
        strategy:
            matrix:
                node-version:
                    - 22
        concurrency:
            group: ${{ github.head_ref }}-test-domains-contact
            cancel-in-progress: true
        steps:
            - uses: actions/checkout@v4
              with:
                  ref: ${{ github.head_ref }}
            - uses: pnpm/action-setup@v4
              with:
                  version: 10
            - uses: actions/setup-node@v4
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: pnpm
            - name: Update System
              run: sudo apt-get update
            - name: Install (pnpm)
              run: pnpm install --frozen-lockfile
            - name: Rebuild
              run: pnpm rebuild
            - name: Test (components)
              env:
                  COVERAGE_THRESHOLD_LINES: 93.19
                  COVERAGE_THRESHOLD_FUNCTIONS: 96.15
                  COVERAGE_THRESHOLD_STATEMENTS: 93.5
                  COVERAGE_THRESHOLD_BRANCHES: 87.67
                  COVERAGE_INCLUDE_PATH: src/domains/contact/components
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 2
                  command: pnpm test:coverage src/domains/contact/components

            - name: Test (pages)
              uses: nick-invision/retry@v2
              env:
                  COVERAGE_INCLUDE_PATH: src/domains/contact/pages
              with:
                  timeout_minutes: 10
                  max_attempts: 2
                  command: pnpm test:coverage src/domains/contact/pages

            - name: Test (Validations)
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 2
                  command: pnpm test:coverage src/domains/contact/routing.test.ts src/domains/validations

    domains-dashboard:
        runs-on: ubuntu-latest
        env:
            COVERAGE_INCLUDE_PATH: src/domains/dashboard
        strategy:
            matrix:
                node-version:
                    - 22
        concurrency:
            group: ${{ github.head_ref }}-test-domains-dashboard
            cancel-in-progress: true
        steps:
            - uses: actions/checkout@v4
              with:
                  ref: ${{ github.head_ref }}
            - uses: pnpm/action-setup@v4
              with:
                  version: 10
            - uses: actions/setup-node@v4
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: pnpm
            - name: Update System
              run: sudo apt-get update
            - name: Install (pnpm)
              run: pnpm install --frozen-lockfile
            - name: Rebuild
              run: pnpm rebuild
            - name: Test
              uses: nick-invision/retry@v2
              env:
                  COVERAGE_THRESHOLD_LINES: 95.08
                  COVERAGE_THRESHOLD_FUNCTIONS: 93.75
                  COVERAGE_THRESHOLD_STATEMENTS: 95.31
                  COVERAGE_THRESHOLD_BRANCHES: 90
                  COVERAGE_INCLUDE_PATH: src/domains/dashboard
              with:
                  timeout_minutes: 10
                  max_attempts: 1
                  command: pnpm test:coverage src/domains/dashboard
    domains-portfolio:
        runs-on: ubuntu-latest
        env:
            COVERAGE_INCLUDE_PATH: src/domains/portfolio
        strategy:
            matrix:
                node-version:
                    - 22
        concurrency:
            group: ${{ github.head_ref }}-test-domains-portfolio
            cancel-in-progress: true
        steps:
            - uses: actions/checkout@v4
              with:
                  ref: ${{ github.head_ref }}
            - uses: pnpm/action-setup@v4
              with:
                  version: 10
            - uses: actions/setup-node@v4
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: pnpm
            - name: Update System
              run: sudo apt-get update
            - name: Install (pnpm)
              run: pnpm install --frozen-lockfile
            - name: Rebuild
              run: pnpm rebuild
            - name: Test
              uses: nick-invision/retry@v2
              env:
                  COVERAGE_THRESHOLD_LINES: 84.84
                  COVERAGE_THRESHOLD_FUNCTIONS: 82.43
                  COVERAGE_THRESHOLD_STATEMENTS: 85.37
                  COVERAGE_THRESHOLD_BRANCHES: 76.34
                  COVERAGE_INCLUDE_PATH: src/domains/portfolio
              with:
                  timeout_minutes: 10
                  max_attempts: 1
                  command: pnpm test:coverage src/domains/portfolio

    domains-error:
        runs-on: ubuntu-latest
        env:
            COVERAGE_INCLUDE_PATH: src/domains/error
        strategy:
            matrix:
                node-version:
                    - 22
        concurrency:
            group: ${{ github.head_ref }}-test-domains-error
            cancel-in-progress: true
        steps:
            - uses: actions/checkout@v4
              with:
                  ref: ${{ github.head_ref }}
            - uses: pnpm/action-setup@v4
              with:
                  version: 10
            - uses: actions/setup-node@v4
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: pnpm
            - name: Update System
              run: sudo apt-get update
            - name: Install (pnpm)
              run: pnpm install --frozen-lockfile
            - name: Rebuild
              run: pnpm rebuild
            - name: Test
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 1
                  command: pnpm test:coverage src/domains/error
    domains-exchange:
        runs-on: ubuntu-latest
        env:
            COVERAGE_INCLUDE_PATH: src/domains/exchange
            COVERAGE_THRESHOLD_LINES: 98.5
            COVERAGE_THRESHOLD_FUNCTIONS: 97.54
            COVERAGE_THRESHOLD_STATEMENTS: 98
            COVERAGE_THRESHOLD_BRANCHES: 96.94
        strategy:
            matrix:
                node-version:
                    - 22
        concurrency:
            group: ${{ github.head_ref }}-test-domains-exchange
            cancel-in-progress: true
        steps:
            - uses: actions/checkout@v4
              with:
                  ref: ${{ github.head_ref }}
            - uses: pnpm/action-setup@v4
              with:
                  version: 10
            - uses: actions/setup-node@v4
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: pnpm
            - name: Update System
              run: sudo apt-get update
            - name: Install (pnpm)
              run: pnpm install --frozen-lockfile
            - name: Rebuild
              run: pnpm rebuild
            - name: Test
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 1
                  command: pnpm test:coverage src/domains/exchange
    domains-message:
        runs-on: ubuntu-latest
        env:
            COVERAGE_INCLUDE_PATH: src/domains/message
        strategy:
            matrix:
                node-version:
                    - 22
        concurrency:
            group: ${{ github.head_ref }}-test-domains-message
            cancel-in-progress: true
        steps:
            - uses: actions/checkout@v4
              with:
                  ref: ${{ github.head_ref }}
            - uses: pnpm/action-setup@v4
              with:
                  version: 10
            - uses: actions/setup-node@v4
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: pnpm
            - name: Update System
              run: sudo apt-get update
            - name: Install (pnpm)
              run: pnpm install --frozen-lockfile
            - name: Rebuild
              run: pnpm rebuild
            - name: Test
              uses: nick-invision/retry@v2
              env:
                  COVERAGE_THRESHOLD_LINES: 94.92
                  COVERAGE_THRESHOLD_FUNCTIONS: 98.3
                  COVERAGE_THRESHOLD_STATEMENTS: 95.12
                  COVERAGE_THRESHOLD_BRANCHES: 92.46
                  COVERAGE_INCLUDE_PATH: src/domains/message
              with:
                  timeout_minutes: 10
                  max_attempts: 1
                  command: pnpm test:coverage src/domains/message

    domains-profile:
        runs-on: ubuntu-latest
        env:
            COVERAGE_INCLUDE_PATH: src/domains/profile
        strategy:
            matrix:
                node-version:
                    - 22
        concurrency:
            group: ${{ github.head_ref }}-test-domains-profile
            cancel-in-progress: true
        steps:
            - uses: actions/checkout@v4
              with:
                  ref: ${{ github.head_ref }}
            - uses: pnpm/action-setup@v4
              with:
                  version: 10
            - uses: actions/setup-node@v4
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: pnpm
            - name: Update System
              run: sudo apt-get update
            - name: Install (pnpm)
              run: pnpm install --frozen-lockfile
            - name: Rebuild
              run: pnpm rebuild
            - name: Test
              env:
                  COVERAGE_THRESHOLD_LINES: 94.38
                  COVERAGE_THRESHOLD_FUNCTIONS: 94.96
                  COVERAGE_THRESHOLD_STATEMENTS: 94.53
                  COVERAGE_THRESHOLD_BRANCHES: 87.9
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 1
                  command: pnpm test:coverage src/domains/profile
    domains-setting:
        runs-on: ubuntu-latest
        env:
            COVERAGE_INCLUDE_PATH: src/domains/setting
        strategy:
            matrix:
                node-version:
                    - 22
        concurrency:
            group: ${{ github.head_ref }}-test-domains-setting
            cancel-in-progress: true
        steps:
            - uses: actions/checkout@v4
              with:
                  ref: ${{ github.head_ref }}
            - uses: pnpm/action-setup@v4
              with:
                  version: 10
            - uses: actions/setup-node@v4
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: pnpm
            - name: Update System
              run: sudo apt-get update
            - name: Install (pnpm)
              run: pnpm install --frozen-lockfile
            - name: Rebuild
              run: pnpm rebuild
            - name: Test
              env:
                  COVERAGE_THRESHOLD_LINES: 96.52
                  COVERAGE_THRESHOLD_FUNCTIONS: 97.19
                  COVERAGE_THRESHOLD_STATEMENTS: 96.51
                  COVERAGE_THRESHOLD_BRANCHES: 92.3
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 1
                  command: pnpm test:coverage src/domains/setting
    domains-transaction:
        runs-on: ubuntu-latest
        env:
            COVERAGE_INCLUDE_PATH: src/domains/transaction
        strategy:
            matrix:
                node-version:
                    - 22
        concurrency:
            group: ${{ github.head_ref }}-test-domains-transaction
            cancel-in-progress: true
        steps:
            - uses: actions/checkout@v4
              with:
                  ref: ${{ github.head_ref }}
            - uses: pnpm/action-setup@v4
              with:
                  version: 10
            - uses: actions/setup-node@v4
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: pnpm
            - name: Update System
              run: sudo apt-get update
            - name: Install (pnpm)
              run: pnpm install --frozen-lockfile
            - name: Rebuild
              run: pnpm rebuild

            - name: Test Utils
              env:
                  COVERAGE_THRESHOLD_LINES: 100
                  COVERAGE_THRESHOLD_FUNCTIONS: 100
                  COVERAGE_THRESHOLD_STATEMENTS: 100
                  COVERAGE_THRESHOLD_BRANCHES: 100
                  COVERAGE_INCLUDE_PATH: src/domains/transaction/utils.ts,src/domains/transaction/routing.ts
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 1
                  command: pnpm test:coverage src/domains/transaction/utils.test.ts src/domains/transaction/routing.test.ts

            - name: Test Components ^A-O
              env:
                  COVERAGE_THRESHOLD_LINES: 97.12
                  COVERAGE_THRESHOLD_FUNCTIONS: 94.79
                  COVERAGE_THRESHOLD_STATEMENTS: 97.2
                  COVERAGE_THRESHOLD_BRANCHES: 93.2
                  COVERAGE_INCLUDE_PATH: src/domains/transaction/components/[A-O]*
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 1
                  command: pnpm test:coverage src/domains/transaction/components/[A-O]*

            - name: Test Components ^P-S
              env:
                  COVERAGE_THRESHOLD_LINES: 90.31
                  COVERAGE_THRESHOLD_FUNCTIONS: 88.66
                  COVERAGE_THRESHOLD_STATEMENTS: 90.29
                  COVERAGE_THRESHOLD_BRANCHES: 83.33
                  COVERAGE_INCLUDE_PATH: src/domains/transaction/components/[P-S]*
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 1
                  command: pnpm test:coverage src/domains/transaction/components/[P-S]*

            - name: Test Components ^T-Z
              env:
                  COVERAGE_THRESHOLD_LINES: 91.09
                  COVERAGE_THRESHOLD_FUNCTIONS: 92.43
                  COVERAGE_THRESHOLD_STATEMENTS: 91.16
                  COVERAGE_THRESHOLD_BRANCHES: 86.68
                  COVERAGE_INCLUDE_PATH: src/domains/transaction/components/[T-Z]*
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 1
                  command: pnpm test:coverage src/domains/transaction/components/[T-Z]*

            - name: Test Hooks
              env:
                  COVERAGE_THRESHOLD_LINES: 99.28
                  COVERAGE_THRESHOLD_FUNCTIONS: 100
                  COVERAGE_THRESHOLD_STATEMENTS: 99.35
                  COVERAGE_THRESHOLD_BRANCHES: 100
                  COVERAGE_INCLUDE_PATH: src/domains/transaction/hooks
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 1
                  command: pnpm test:coverage src/domains/transaction/hooks

            - name: Test Validations
              env:
                  COVERAGE_THRESHOLD_LINES: 100
                  COVERAGE_THRESHOLD_FUNCTIONS: 100
                  COVERAGE_THRESHOLD_STATEMENTS: 100
                  COVERAGE_THRESHOLD_BRANCHES: 100
                  COVERAGE_INCLUDE_PATH: src/domains/transaction/validations
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 1
                  command: pnpm test:coverage src/domains/transaction/validations
    domains-vote:
        runs-on: ubuntu-latest
        env:
            COVERAGE_INCLUDE_PATH: src/domains/vote
        strategy:
            matrix:
                node-version:
                    - 22
        concurrency:
            group: ${{ github.head_ref }}-test-domains-vote
            cancel-in-progress: true
        steps:
            - uses: actions/checkout@v4
              with:
                  ref: ${{ github.head_ref }}
            - uses: pnpm/action-setup@v4
              with:
                  version: 10
            - uses: actions/setup-node@v4
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: pnpm
            - name: Update System
              run: sudo apt-get update
            - name: Install (pnpm)
              run: pnpm install --frozen-lockfile
            - name: Rebuild
              run: pnpm rebuild
            - name: Test
              uses: nick-invision/retry@v2
              env:
                  COVERAGE_THRESHOLD_LINES: 96.67
                  COVERAGE_THRESHOLD_FUNCTIONS: 97.66
                  COVERAGE_THRESHOLD_STATEMENTS: 96.66
                  COVERAGE_THRESHOLD_BRANCHES: 95.68
              with:
                  timeout_minutes: 10
                  max_attempts: 1
                  command: pnpm test:coverage src/domains/vote
    domains-wallet:
        runs-on: ubuntu-latest
        env:
            COVERAGE_INCLUDE_PATH: src/domains/wallet
        strategy:
            matrix:
                node-version:
                    - 22
        concurrency:
            group: ${{ github.head_ref }}-test-domains-wallet
            cancel-in-progress: true
        steps:
            - uses: actions/checkout@v4
              with:
                  ref: ${{ github.head_ref }}
            - uses: pnpm/action-setup@v4
              with:
                  version: 10
            - uses: actions/setup-node@v4
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: pnpm
            - name: Update System
              run: sudo apt-get update
            - name: Install (pnpm)
              run: pnpm install --frozen-lockfile
            - name: Rebuild
              run: pnpm rebuild
            - name: Test
              uses: nick-invision/retry@v2
              env:
                  COVERAGE_THRESHOLD_LINES: 83.85
                  COVERAGE_THRESHOLD_FUNCTIONS: 87.74
                  COVERAGE_THRESHOLD_STATEMENTS: 84.24
                  COVERAGE_THRESHOLD_BRANCHES: 81.28
                  COVERAGE_INCLUDE_PATH: src/domains/wallet
              with:
                  timeout_minutes: 10
                  max_attempts: 1
                  command: pnpm test:coverage src/domains/wallet
    router:
        runs-on: ubuntu-latest
        env:
            COVERAGE_INCLUDE_PATH: src/router
            COVERAGE_THRESHOLD_BRANCHES: 92.59
        strategy:
            matrix:
                node-version:
                    - 22
        concurrency:
            group: ${{ github.head_ref }}-test-router
            cancel-in-progress: true
        steps:
            - uses: actions/checkout@v4
              with:
                  ref: ${{ github.head_ref }}
            - uses: pnpm/action-setup@v4
              with:
                  version: 10
            - uses: actions/setup-node@v4
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: pnpm
            - name: Update System
              run: sudo apt-get update
            - name: Install (pnpm)
              run: pnpm install --frozen-lockfile
            - name: Rebuild
              run: pnpm rebuild
            - name: Test
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 1
                  command: pnpm test:coverage src/router
    utils:
        runs-on: ubuntu-latest
        env:
            COVERAGE_INCLUDE_PATH: src/utils
            COVERAGE_THRESHOLD_LINES: 100
            COVERAGE_THRESHOLD_BRANCHES: 100
            COVERAGE_THRESHOLD_FUNCTIONS: 100
            COVERAGE_THRESHOLD_STATEMENTS: 100
        strategy:
            matrix:
                node-version:
                    - 22
        concurrency:
            group: ${{ github.head_ref }}-test-utils
            cancel-in-progress: true
        steps:
            - uses: actions/checkout@v4
              with:
                  ref: ${{ github.head_ref }}
            - uses: pnpm/action-setup@v4
              with:
                  version: 10
            - uses: actions/setup-node@v4
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: pnpm
            - name: Update System
              run: sudo apt-get update
            - name: Install (pnpm)
              run: pnpm install --frozen-lockfile
            - name: Rebuild
              run: pnpm rebuild
            - name: Test
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 1
                  command: pnpm test:coverage src/utils
    libs:
        runs-on: ubuntu-latest
        env:
            COVERAGE_INCLUDE_PATH: src/app/lib
            COVERAGE_THRESHOLD_LINES: 84.59
            COVERAGE_THRESHOLD_BRANCHES: 83.93
            COVERAGE_THRESHOLD_FUNCTIONS: 83.92
            COVERAGE_THRESHOLD_STATEMENTS: 84.55
        strategy:
            matrix:
                node-version:
                    - 22
        concurrency:
            group: ${{ github.head_ref }}-test-libs
            cancel-in-progress: true
        steps:
            - uses: actions/checkout@v4
              with:
                  ref: ${{ github.head_ref }}
            - uses: pnpm/action-setup@v4
              with:
                  version: 10
            - uses: actions/setup-node@v4
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: pnpm
            - name: Update System
              run: sudo apt-get update
            - name: Install (pnpm)
              run: pnpm install --frozen-lockfile
            - name: Rebuild
              run: pnpm rebuild
            - name: Test
              uses: nick-invision/retry@v2
              with:
                  timeout_minutes: 10
                  max_attempts: 1
                  command: pnpm test:coverage src/app/lib
